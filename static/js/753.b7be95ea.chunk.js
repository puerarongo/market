"use strict";(self.webpackChunkmarket=self.webpackChunkmarket||[]).push([[753],{7138:function(e,r,n){n.d(r,{Z:function(){return E}});var a=n(4165),s=n(5861),t=(n(2791),"Form_container__95w0O"),o="Form_form__gjyi8",i="Form_label__2sM9O",l="Form_input__9y3wg",u="Form_input__error__arTDk",c="Form_default__count__2CGuO",m="Form_error__count__JHsSp",d="Form_button__BDA4v",_="Form_auth__text__vl+Fz",h="Form_auth__link__STn2W",p=n(5705),g=n(8007),f=g.Ry().shape({email:g.Z_().typeError("Will be a string").email("You must enter the field in email format").matches(/^(?!-)\S{2,}@\S+(\.\w{2,})(?!-)$/,"You must enter the field in email format").min(6,"The field contains an error").max(63,"The field contains an error").required("This field is required"),password:g.Z_().typeError("Will be a string").min(6,"Password must contain at least 6 characters").max(30,"Password must be less than 30 characters").matches(/^(?!-|\.)[0-9a-zA-Z*!@#$%^&(){}[\]:;<>,.?/~_+\-=|\\]{5,30}$/,"The field contains an error").required("This field is required")}),x=n(480),j=n(9434),v="GoogleButton_hr__Isubr",w="GoogleButton_google__text__M61N9",Z="GoogleButton_button__google__yHWct",b="GoogleButton_svg__container__sv3mL",N="GoogleButton_svg__google__ZnH9j",y="GoogleButton_text__google__m67Fg",F=n(9328),k=n(184),B=function(e){var r=e.googleFunction;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("hr",{className:v}),(0,k.jsx)("p",{className:w,children:"You can sign in with google login!"}),(0,k.jsxs)("button",{className:Z,type:"button",onClick:function(){return r()},children:[(0,k.jsx)("span",{className:b,children:(0,k.jsx)("svg",{className:N,children:(0,k.jsx)("use",{href:F.Z.google+"#google"})})}),(0,k.jsx)("p",{className:y,children:"Connect Gmail"})]})]})},T=n(1087),C=n(2936),A=n(6157),S=n(7799),G=n(7689),R=n(653),J=n(7820),P=n(5115),z=n(5299),E=function(e){var r=e.firebaseFunc,n=e.buttonName,g=e.formType,v=(0,G.s0)(),w=(0,j.I0)(),Z=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new J.hJ,e.abrupt("return",(0,J.rh)(x.I,r).then(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(r){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.user,e.next=3,(0,S.QT)((0,S.JU)(x.db,"users",n.uid)).then(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(r){var s,t,o,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,S.pl)((0,S.JU)(x.db,"users",n.uid),{uid:n.uid,email:n.email},{merge:!0});case 2:s=r.data(),t=s.allProducts,o=s.allQuantity,i=s.allAmount,t&&w(P.B.addBuy({allProducts:t,allQuantity:o,allAmount:i}));case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 3:w(R.h.userAdd({user:n.uid,email:n.email}));case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,k.jsx)("div",{className:t,children:(0,k.jsx)(p.J9,{initialValues:{email:"",password:""},validationSchema:f,onSubmit:function(e,n){var t=n.resetForm,o=e.email,i=e.password;r(x.I,o,i).then(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(r){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("registration"!==g){e.next=4;break}return n=r.user,e.next=4,(0,S.pl)((0,S.JU)(x.db,"users",n.uid),{uid:n.uid,email:o,personal:{allProducts:[],allAmount:0,allQuantity:0}});case 4:v("/personal"),w(R.h.userAdd({user:r.user.uid,email:r.user.email}));case 6:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()).catch((function(e){t(),"registration"===g?z.Report.failure("Registration Error","The user with this email is already registered","OK"):z.Report.failure("Login Error","This user is not registered","OK")})),t()},children:function(e){var r=e.values,a=e.errors,s=e.touched,t=e.handleBlur,p=e.handleChange,f=e.handleSubmit;return(0,k.jsxs)(C.Z,{className:o,onSubmit:f,children:[(0,k.jsxs)(C.Z.Label,{className:i,children:["Email",(0,k.jsx)(C.Z.Control,{size:"lg",className:a.email&&s.email?u:l,type:"email",placeholder:"email@a.com",name:"email",value:r.email,onBlur:t,onChange:p}),a.email&&s.email?(0,k.jsx)("p",{className:m,children:"".concat(a.email)}):(0,k.jsx)("span",{className:c})]}),(0,k.jsxs)(C.Z.Label,{className:i,children:["Password",(0,k.jsx)(C.Z.Control,{size:"lg",className:a.password&&s.password?u:l,type:"password",placeholder:"password",name:"password",value:r.password,onBlur:t,onChange:p}),a.password&&s.password?(0,k.jsx)("p",{className:m,children:"".concat(a.password)}):(0,k.jsx)("span",{className:c})]}),(0,k.jsx)(A.Z,{type:"submit",size:"lg",className:d,children:n}),"login"===g?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("p",{className:_,children:["Don't have an account yet?",(0,k.jsx)(T.rU,{to:"/registration",className:h,children:"Register"})]}),(0,k.jsx)(B,{googleFunction:Z})]}):(0,k.jsxs)("p",{className:_,children:["Are you already registered?",(0,k.jsx)(T.rU,{to:"/login",className:h,children:"Return to login"})]})]})}})})}},5753:function(e,r,n){n.r(r);n(2791);var a=n(4475),s=n(7138),t=n(7820),o=n(184);r.default=function(){return(0,o.jsxs)("div",{className:a.Z.container,children:[(0,o.jsx)("h2",{className:a.Z.title,children:"Login"}),(0,o.jsx)(s.Z,{firebaseFunc:t.e5,buttonName:"Sign In",formType:"login"})]})}},4475:function(e,r){r.Z={container:"Registration_container__AaogK",title:"Registration_title__otapX"}}}]);
//# sourceMappingURL=753.b7be95ea.chunk.js.map