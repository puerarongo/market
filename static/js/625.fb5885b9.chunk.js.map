{"version":3,"file":"static/js/625.fb5885b9.chunk.js","mappings":"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","sources":["webpack://market/./src/components/basket/Basket.module.css?f9ac","webpack://market/./src/components/basket/baksetItem/BasketItem.module.css?a454","components/basket/baksetItem/BasketItem.tsx","services/addBuyCheck.ts","components/basket/Basket.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Basket_container__zEmeY\",\"basket__title\":\"Basket_basket__title__W29Wk\",\"basket__list\":\"Basket_basket__list__wyfE9\",\"item\":\"Basket_item__ZMlS5\",\"buy__cintainer\":\"Basket_buy__cintainer__0kMNL\",\"total__quantity\":\"Basket_total__quantity__7n24k\",\"total__amount\":\"Basket_total__amount__g2E1x\",\"button\":\"Basket_button__XAXqn\",\"basket__empty\":\"Basket_basket__empty__KYZ5S\",\"empty__title\":\"Basket_empty__title__3vKZH\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"BasketItem_container__YnOFc\",\"img\":\"BasketItem_img__R3AU8\",\"container__into\":\"BasketItem_container__into__8RXqO\",\"title\":\"BasketItem_title__7HbOw\",\"into\":\"BasketItem_into__IldLL\",\"quantity\":\"BasketItem_quantity__UIf6R\",\"price\":\"BasketItem_price__3mq09\",\"button\":\"BasketItem_button__ft4rR\"};","import React from \"react\";\nimport styles from \"./BasketItem.module.css\";\nimport { Button } from \"react-bootstrap\";\nimport { useDispatch } from \"react-redux\";\nimport { basketActions } from \"../../../redux/slices/basketSlice\";\n\ninterface IBasketItem {\n  id: Number;\n  image: String;\n  title: String;\n  quantity: Number;\n  price: Number;\n}\n\nconst BasketItem: React.FC<IBasketItem> = ({\n  id,\n  image,\n  title,\n  quantity,\n  price,\n}) => {\n  const dispatch = useDispatch();\n\n  const deleteFromBasket = () => {\n    dispatch(\n      basketActions.deleteProduct({\n        id: id,\n      })\n    );\n  };\n\n  return (\n    <div className={styles.container}>\n      <img\n        className={styles.img}\n        src={`https://image.tmdb.org/t/p/w300${image}`}\n        alt={`${id}`}\n      />\n\n      <h3 className={styles.title}>{title}</h3>\n      <div className={styles.into}>\n      <p className={styles.quantity}>{`${quantity} pcs`}</p>\n      <p className={styles.price}>{`$ ${price}`}</p>\n      <Button\n        variant=\"danger\"\n        className={styles.button}\n        type=\"button\"\n        onClick={deleteFromBasket}\n      >\n        Delete\n      </Button>\n      </div>\n    </div>\n  );\n};\n\nexport default BasketItem;\n","import { store } from \"../redux/store\";\n\nconst addBuyCheck = (productItems: any) => {\n  const state = store.getState().personal;\n  const objProducts = [...state.allProducts];\n  productItems.forEach((el: any) => {\n    const exitingProducts = state.allProducts.findIndex(\n      (prod: any) => el.id === prod.id\n    );\n    if (exitingProducts >= 0) {\n      const oldProd = state.allProducts[exitingProducts];\n      objProducts[exitingProducts] = {\n        ...oldProd,\n        quantity: oldProd.quantity + el.quantity,\n        totalPrice: oldProd.totalPrice + el.totalPrice,\n      };\n    } else\n      objProducts.push({\n        id: el.id,\n        image: el.image,\n        title: el.title,\n        overview: el.overview,\n        quantity: el.quantity,\n        totalPrice: el.totalPrice,\n      });\n  });\n  return objProducts;\n};\n\nexport default addBuyCheck;\n","import React from \"react\";\nimport styles from \"./Basket.module.css\";\nimport BasketItem from \"./baksetItem/BasketItem\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { Button } from \"react-bootstrap\";\nimport { basketActions } from \"../../redux/slices/basketSlice\";\nimport { personalActions } from \"../../redux/slices/personalSlice\";\nimport { updateDoc, doc, increment } from \"firebase/firestore\";\nimport { db } from \"../firebase\";\nimport addBuyCheck from \"../../services/addBuyCheck\";\nimport { Notify } from \"notiflix\";\n\nNotify.init({\n  position: \"right-bottom\",\n  timeout: 1500,\n});\n\nconst Basket: React.FC = () => {\n  const dispatch = useDispatch();\n  const items = useSelector((state: any) => state.basket);\n  // const personal = useSelector((state: any) => state.personal);\n  const user = useSelector((state: any) => state.user);\n\n  const someFunction = () => {\n    try {\n      const { basketItems, totalAmount, totalQuantity } = items;\n      const newItems = {\n        allProducts: addBuyCheck(basketItems),\n        allAmount: totalAmount,\n        allQuantity: totalQuantity,\n      };\n      dispatch(basketActions.allDelete());\n      dispatch(personalActions.addBuy(newItems));\n\n      const { allProducts, allAmount, allQuantity } = newItems;\n      updateDoc(doc(db, \"users\", user.user), {\n        allProducts: allProducts,\n        allAmount: increment(allAmount),\n        allQuantity: increment(allQuantity),\n      });\n\n      Notify.info(\"You had made a purchase!\");\n    } catch (error: unknown) {\n      console.log(error);\n    }\n  };\n\n  return (\n    <div className={styles.container}>\n      <ul className={styles.basket__list}>\n        {items.basketItems.length > 0 ? (\n          <>\n            <li className={styles.basket__title}>Your shopping basket</li>\n            {items.basketItems.map(\n              ({ id, image, title, quantity, totalPrice }: any) => {\n                return (\n                  <li className={styles.item} key={id}>\n                    <BasketItem\n                      id={id}\n                      image={image}\n                      title={title}\n                      quantity={quantity}\n                      price={totalPrice}\n                    />\n                  </li>\n                );\n              }\n            )}\n            <li className={styles.buy__cintainer}>\n              <h3\n                className={styles.total__quantity}\n              >{`Total Quantity of Products: ${items.totalQuantity} pcs`}</h3>\n              <h3\n                className={styles.total__amount}\n              >{`Total Amount: $ ${items.totalAmount}`}</h3>\n              <Button\n                type=\"button\"\n                className={styles.button}\n                onClick={someFunction}\n              >\n                Buy\n              </Button>\n            </li>\n          </>\n        ) : (\n          <li className={styles.basket__empty}>\n            <h2 className={styles.empty__title}>Basket is currently empty!</h2>\n          </li>\n        )}\n      </ul>\n    </div>\n  );\n};\n\nexport default Basket;\n"],"names":["_ref","id","image","title","quantity","price","dispatch","useDispatch","_jsxs","className","styles","children","_jsx","src","concat","alt","Button","variant","type","onClick","basketActions","productItems","state","store","personal","objProducts","_toConsumableArray","allProducts","forEach","el","exitingProducts","findIndex","prod","oldProd","_objectSpread","totalPrice","push","overview","Notify","position","timeout","items","useSelector","basket","user","basketItems","length","_Fragment","map","BasketItem","totalQuantity","totalAmount","newItems","addBuyCheck","allAmount","allQuantity","personalActions","updateDoc","doc","db","increment","error","console","log"],"sourceRoot":""}