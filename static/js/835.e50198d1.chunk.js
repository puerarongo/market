"use strict";(self.webpackChunkmarket=self.webpackChunkmarket||[]).push([[835],{7138:function(e,r,a){a.d(r,{Z:function(){return U}});var n=a(4165),t=a(5861),s=(a(2791),"Form_container__95w0O"),o="Form_form__gjyi8",i="Form_label__2sM9O",l="Form_input__9y3wg",u="Form_input__error__arTDk",c="Form_default__count__2CGuO",m="Form_error__count__JHsSp",d="Form_button__BDA4v",h="Form_auth__text__vl+Fz",_="Form_auth__link__STn2W",p=a(5705),g=a(8007),f=g.Ry().shape({email:g.Z_().typeError("Will be a string").email("You must enter the field in email format").matches(/^(?!-)\S{2,}@\S+(\.\w{2,})(?!-)$/,"You must enter the field in email format").min(6,"The field contains an error").max(63,"The field contains an error").required("This field is required"),password:g.Z_().typeError("Will be a string").min(6,"Password must contain at least 6 characters").max(30,"Password must be less than 30 characters").matches(/^(?!-|\.)[0-9a-zA-Z*!@#$%^&(){}[\]:;<>,.?/~_+\-=|\\]{5,30}$/,"The field contains an error").required("This field is required")}),x=a(480),v=a(9434),j="GoogleButton_hr__Isubr",w="GoogleButton_google__text__M61N9",b="GoogleButton_button__google__yHWct",y="GoogleButton_svg__container__sv3mL",Z="GoogleButton_svg__google__ZnH9j",N="GoogleButton_text__google__m67Fg",F=a(9328),k=a(184),B=function(e){var r=e.googleFunction;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("hr",{className:j}),(0,k.jsx)("p",{className:w,children:"You can sign in with google login!"}),(0,k.jsxs)("button",{className:b,type:"button",onClick:function(){return r()},children:[(0,k.jsx)("span",{className:y,children:(0,k.jsx)("svg",{className:Z,children:(0,k.jsx)("use",{href:F.Z.google+"#google"})})}),(0,k.jsx)("p",{className:N,children:"Connect Gmail"})]})]})},T=a(1087),A=a(2936),C=a(6157),R=a(7799),S=a(7689),G=a(653),P=a(7820),J=a(5115),Q=a(5299),U=function(e){var r=e.firebaseFunc,a=e.buttonName,g=e.formType,j=(0,S.s0)(),w=(0,v.I0)(),b=function(){var e=(0,t.Z)((0,n.Z)().mark((function e(){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new P.hJ,e.abrupt("return",(0,P.rh)(x.I,r).then(function(){var e=(0,t.Z)((0,n.Z)().mark((function e(r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.user,e.next=3,(0,R.QT)((0,R.JU)(x.db,"users",a.uid)).then(function(){var e=(0,t.Z)((0,n.Z)().mark((function e(r){var t,s,o,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,R.pl)((0,R.JU)(x.db,"users",a.uid),{uid:a.uid,email:a.email},{merge:!0});case 2:t=r.data(),s=t.allProducts,o=t.allQuantity,i=t.allAmount,s&&w(J.B.addBuy({allProducts:s,allQuantity:o,allAmount:i}));case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 3:w(G.h.userAdd({user:a.uid,email:a.email}));case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,k.jsx)("div",{className:s,children:(0,k.jsx)(p.J9,{initialValues:{email:"",password:""},validationSchema:f,onSubmit:function(e,a){var s=a.resetForm,o=e.email,i=e.password;r(x.I,o,i).then(function(){var e=(0,t.Z)((0,n.Z)().mark((function e(r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("registration"!==g){e.next=4;break}return a=r.user,e.next=4,(0,R.pl)((0,R.JU)(x.db,"users",a.uid),{uid:a.uid,email:o,personal:{allProducts:[],allAmount:0,allQuantity:0}});case 4:j("/personal"),w(G.h.userAdd({user:r.user.uid,email:r.user.email})),(0,R.QT)((0,R.JU)(x.db,"users",r.user.uid)).then((function(e){var r=e.data(),a=r.allProducts,n=r.allQuantity,t=r.allAmount;a&&w(J.B.addBuy({allProducts:a,allQuantity:n,allAmount:t})),w(G.h.setIsReady(!0))})).catch((function(e){return console.log(e)}));case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()).catch((function(e){s(),"registration"===g?Q.Report.failure("Registration Error","The user with this email is already registered","OK"):Q.Report.failure("Login Error","This user is not registered","OK")})),s()},children:function(e){var r=e.values,n=e.errors,t=e.touched,s=e.handleBlur,p=e.handleChange,f=e.handleSubmit;return(0,k.jsxs)(A.Z,{className:o,onSubmit:f,children:[(0,k.jsxs)(A.Z.Label,{className:i,children:["Email",(0,k.jsx)(A.Z.Control,{size:"lg",className:n.email&&t.email?u:l,type:"email",placeholder:"email@a.com",name:"email",value:r.email,onBlur:s,onChange:p}),n.email&&t.email?(0,k.jsx)("p",{className:m,children:"".concat(n.email)}):(0,k.jsx)("span",{className:c})]}),(0,k.jsxs)(A.Z.Label,{className:i,children:["Password",(0,k.jsx)(A.Z.Control,{size:"lg",className:n.password&&t.password?u:l,type:"password",placeholder:"password",name:"password",value:r.password,onBlur:s,onChange:p}),n.password&&t.password?(0,k.jsx)("p",{className:m,children:"".concat(n.password)}):(0,k.jsx)("span",{className:c})]}),(0,k.jsx)(C.Z,{type:"submit",size:"lg",className:d,children:a}),"login"===g?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("p",{className:h,children:["Don't have an account yet?",(0,k.jsx)(T.rU,{to:"/registration",className:_,children:"Register"})]}),(0,k.jsx)(B,{googleFunction:b})]}):(0,k.jsxs)("p",{className:h,children:["Are you already registered?",(0,k.jsx)(T.rU,{to:"/login",className:_,children:"Return to login"})]})]})}})})}},4835:function(e,r,a){a.r(r);a(2791);var n=a(4475),t=a(7138),s=a(7820),o=a(184);r.default=function(){return(0,o.jsxs)("div",{className:n.Z.container,children:[(0,o.jsx)("h2",{className:n.Z.title,children:"Registration"}),(0,o.jsx)(t.Z,{firebaseFunc:s.Xb,buttonName:"Sign Up",formType:"registration"})]})}},4475:function(e,r){r.Z={container:"Registration_container__AaogK",title:"Registration_title__otapX"}}}]);
//# sourceMappingURL=835.e50198d1.chunk.js.map