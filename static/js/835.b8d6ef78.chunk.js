"use strict";(self.webpackChunkmarket=self.webpackChunkmarket||[]).push([[835],{7138:function(e,r,a){a.d(r,{Z:function(){return z}});var n=a(4165),t=a(5861),s=(a(2791),"Form_container__95w0O"),i="Form_form__gjyi8",o="Form_label__2sM9O",l="Form_input__9y3wg",u="Form_input__error__arTDk",c="Form_default__count__2CGuO",m="Form_error__count__JHsSp",d="Form_button__BDA4v",_="Form_auth__text__vl+Fz",h="Form_auth__link__STn2W",p=a(5705),g=a(8007),f=g.Ry().shape({email:g.Z_().typeError("Will be a string").email("You must enter the field in email format").matches(/^(?!-)\S{2,}@\S+(\.\w{2,})(?!-)$/,"You must enter the field in email format").min(6,"The field contains an error").max(63,"The field contains an error").required("This field is required"),password:g.Z_().typeError("Will be a string").min(6,"Password must contain at least 6 characters").max(30,"Password must be less than 30 characters").matches(/^(?!-|\.)[0-9a-zA-Z*!@#$%^&(){}[\]:;<>,.?/~_+\-=|\\]{5,30}$/,"The field contains an error").required("This field is required")}),x=a(480),j=a(9434),v="GoogleButton_hr__Isubr",w="GoogleButton_google__text__M61N9",Z="GoogleButton_button__google__yHWct",b="GoogleButton_svg__container__sv3mL",N="GoogleButton_svg__google__ZnH9j",y="GoogleButton_text__google__m67Fg",F=a(9328),k=a(184),B=function(e){var r=e.googleFunction;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("hr",{className:v}),(0,k.jsx)("p",{className:w,children:"You can sign in with google login!"}),(0,k.jsxs)("button",{className:Z,type:"button",onClick:function(){return r()},children:[(0,k.jsx)("span",{className:b,children:(0,k.jsx)("svg",{className:N,children:(0,k.jsx)("use",{href:F.Z.google+"#google"})})}),(0,k.jsx)("p",{className:y,children:"Connect Gmail"})]})]})},T=a(1087),C=a(2936),A=a(6157),R=a(7799),S=a(7689),G=a(653),J=a(7820),P=a(5115),U=a(5299),z=function(e){var r=e.firebaseFunc,a=e.buttonName,g=e.formType,v=(0,S.s0)(),w=(0,j.I0)(),Z=function(){var e=(0,t.Z)((0,n.Z)().mark((function e(){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new J.hJ,e.abrupt("return",(0,J.rh)(x.I,r).then(function(){var e=(0,t.Z)((0,n.Z)().mark((function e(r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.user,e.next=3,(0,R.QT)((0,R.JU)(x.db,"users",a.uid)).then(function(){var e=(0,t.Z)((0,n.Z)().mark((function e(r){var t,s,i,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,R.pl)((0,R.JU)(x.db,"users",a.uid),{uid:a.uid,email:a.email},{merge:!0});case 2:t=r.data(),s=t.allProducts,i=t.allQuantity,o=t.allAmount,s&&w(P.B.addBuy({allProducts:s,allQuantity:i,allAmount:o}));case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 3:w(G.h.userAdd({user:a.uid,email:a.email}));case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,k.jsx)("div",{className:s,children:(0,k.jsx)(p.J9,{initialValues:{email:"",password:""},validationSchema:f,onSubmit:function(e,a){var s=a.resetForm,i=e.email,o=e.password;r(x.I,i,o).then(function(){var e=(0,t.Z)((0,n.Z)().mark((function e(r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("registration"!==g){e.next=4;break}return a=r.user,e.next=4,(0,R.pl)((0,R.JU)(x.db,"users",a.uid),{uid:a.uid,email:i,personal:{allProducts:[],allAmount:0,allQuantity:0}});case 4:v("/personal"),w(G.h.userAdd({user:r.user.uid,email:r.user.email}));case 6:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()).catch((function(e){s(),"registration"===g?U.Report.failure("Registration Error","The user with this email is already registered","OK"):U.Report.failure("Login Error","This user is not registered","OK")})),s()},children:function(e){var r=e.values,n=e.errors,t=e.touched,s=e.handleBlur,p=e.handleChange,f=e.handleSubmit;return(0,k.jsxs)(C.Z,{className:i,onSubmit:f,children:[(0,k.jsxs)(C.Z.Label,{className:o,children:["Email",(0,k.jsx)(C.Z.Control,{size:"lg",className:n.email&&t.email?u:l,type:"email",placeholder:"email@a.com",name:"email",value:r.email,onBlur:s,onChange:p}),n.email&&t.email?(0,k.jsx)("p",{className:m,children:"".concat(n.email)}):(0,k.jsx)("span",{className:c})]}),(0,k.jsxs)(C.Z.Label,{className:o,children:["Password",(0,k.jsx)(C.Z.Control,{size:"lg",className:n.password&&t.password?u:l,type:"password",placeholder:"password",name:"password",value:r.password,onBlur:s,onChange:p}),n.password&&t.password?(0,k.jsx)("p",{className:m,children:"".concat(n.password)}):(0,k.jsx)("span",{className:c})]}),(0,k.jsx)(A.Z,{type:"submit",size:"lg",className:d,children:a}),"login"===g?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("p",{className:_,children:["Don't have an account yet?",(0,k.jsx)(T.rU,{to:"/registration",className:h,children:"Register"})]}),(0,k.jsx)(B,{googleFunction:Z})]}):(0,k.jsxs)("p",{className:_,children:["Are you already registered?",(0,k.jsx)(T.rU,{to:"/login",className:h,children:"Return to login"})]})]})}})})}},4835:function(e,r,a){a.r(r);a(2791);var n=a(4475),t=a(7138),s=a(7820),i=a(184);r.default=function(){return(0,i.jsxs)("div",{className:n.Z.container,children:[(0,i.jsx)("h2",{className:n.Z.title,children:"Registration"}),(0,i.jsx)(t.Z,{firebaseFunc:s.Xb,buttonName:"Sign Up",formType:"registration"})]})}},4475:function(e,r){r.Z={container:"Registration_container__AaogK",title:"Registration_title__otapX"}}}]);
//# sourceMappingURL=835.b8d6ef78.chunk.js.map